# -----------------------------------------------------------------------------
# Portable OpenOCD config for STM32H5, stored under tools/openocd
# -----------------------------------------------------------------------------

# Compute path relative to this config file
set SCRIPT_DIR [file normalize [file dirname [info script]]]
set LOCAL_SCRIPTS "$SCRIPT_DIR/share/openocd/scripts"

# Extend OpenOCD search path to include repo-local scripts
set auto_path [linsert $auto_path 0 $LOCAL_SCRIPTS]
puts "ðŸ”§ Using OpenOCD scripts from: $LOCAL_SCRIPTS"

# Interface and target setup
source [find interface/stlink-dap.cfg]
transport select dapdirect_swd
adapter speed 4000
source [find board/stm32h5x.cfg]

